<app-header></app-header>

<div class="signup">
  <div class="signup-container">
    <form #form="ngForm" (ngSubmit)="onSubmit(form)">
      <div class="title-container">
        <img src="assets/icons/logo-icon.svg" alt="Ícone do logo" />
        <h3>Cadastre-se para continuar</h3>
      </div>

      <div class="form-container">
        <div class="input-group fullname">
          <label for="fullname">Nome completo</label>
          <input
            id="fullname"
            type="text"
            placeholder="Insira seu nome completo"
            required
            [(ngModel)]="nome"
            name="nome"
            #nameField="ngModel"
          />
          <div class="error" *ngIf="nameField.invalid && nameField.touched">
            <li *ngIf="nameField.errors?.['required']">Nome é obrigatório.</li>
            <li *ngIf="nome && !nomeValido()">Informe nome e sobrenome.</li>
          </div>
        </div>

        <div class="input-group email">
          <label for="email">E-mail</label>
          <input
            id="email"
            type="email"
            placeholder="Insira seu email"
            required
            [(ngModel)]="email"
            name="email"
            #emailField="ngModel"
            email
          />
          <div class="error" *ngIf="emailField.invalid && emailField.touched">
            <li *ngIf="emailField.errors?.['required']">E-mail é obrigatório.</li>
            <li *ngIf="emailField.errors?.['email']">Insira um e-mail válido.</li>
          </div>
        </div>

        <div class="input-group birthdate">
          <label for="birthdate">Data de nascimento</label>
          <input
            id="birthdate"
            type="date"
            required
            [(ngModel)]="dataNascimento"
            name="dataNascimento"
            #dataNascimentoField="ngModel"
          />
          <div class="error" *ngIf="dataNascimentoField.invalid && dataNascimentoField.touched">
            <li *ngIf="dataNascimentoField.errors?.['required']">Data de nascimento é obrigatória.</li>
            <li *ngIf="dataNascimento && !dataNascimentoValida()">Informe uma data válida (mínimo 15 anos).</li>
          </div>
        </div>

        <div class="input-group password">
          <label for="password">Senha</label>
          <input
            [type]="showPassword ? 'text' : 'password'"
            [(ngModel)]="senha"
            name="senha"
            id="password"
            placeholder="Insira sua senha"
            required
            #senhaField="ngModel"
          />

          <div class="error" *ngIf="senhaField.invalid && senhaField.touched">
            <li *ngIf="senhaField.errors?.['required']">A senha é obrigatória.</li>
            <!-- <li *ngIf="senhaField.errors?.['minlength']">A senha deve ter pelo menos 6 caracteres.</li> -->
          </div>

          <div class="show-password">
            <input
              type="checkbox"
              name="show-password"
              id="show-password"
              (change)="togglePassword()"
            />
            <label for="show-password">{{
              showPassword ? "Ocultar senha" : "Visualizar senha"
            }}</label>
          </div>
        </div>

        <div class="input-group confirm-password">
          <label for="confirm-password">Confirmar senha</label>
          <input
            id="confirm-password"
            type="password"
            placeholder="Confirme sua senha"
            required
            [(ngModel)]="confirmarSenha"
            name="confirmarSenha"
            #confirmarSenhaField="ngModel"
          />
          <div class="error" *ngIf="confirmarSenhaField.invalid && confirmarSenhaField.touched">
            <li *ngIf="confirmarSenhaField.errors?.['required']">A confirmação de senha é obrigatória.</li>
            <li *ngIf="senha && confirmarSenha && senha !== confirmarSenha">As senhas não coincidem.</li>
          </div>
        </div>

        <button class="create-btn" type="submit" [disabled]="loading || form.invalid">
          <span *ngIf="!loading">Criar conta</span>
          <span *ngIf="loading">Criando...</span>
          <img
            src="assets/icons/arrow-circle-right.svg"
            alt="Seta para a direita"
          />
        </button>

        <p class="have-account">
          Já possui uma conta? <a routerLink="/login" class="link">Entrar</a>
        </p>
      </div>
    </form>

    <div class="form-hero">
      <div class="container">
        <h2>Olá, <br /><strong>bem-vindo!</strong></h2>
        <p>Comece hoje a investir no seu futuro com segurança.</p>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
